<!--    2020 May 10 Sunday

    To consume an API means to use any part of it (API) from (in) your application.
    Consuming an API means creating a client which can send requests to the API.
    
    The built-in method to consume data from an API in Javascript is fetch()
    
    fetch() is simply a way to make a request in Javascript.
    
    fetch() uses promises.

    A method that provides a logical way to fetch resources asynchronously across the network.

    syntax:

    fetch("http://www.example.com")

        .then(response =>{
            //do something
        })
        .catch(err => {
            console.log(err);
        });


    We can also write it using async/await (ES7):
    let response = await fetch("http://www.example.com");

-->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>fetch()</title>
</head>
<body>
    <div id = "root"></div>
    <script>
        fetch("https://pokeapi.co/api/v2/pokemon")
          .then(response => {
            return response.json();
        }).then(response => {
            console.log(response);
        }).catch(err=>{
            console.log(err);
        });
    </script>
</body>
    

    <script>
    
    /*
    If you were to copy this URL into the URL bar of the browser yourself and then open it, 
    you would see the Pokemon response in the browser. 
    Using fetch is a very easy way to get a simple request going in your html file.
    */
    
        fetch("https://pokeapi.co/api/v2/pokemon/")             // 1- Create a request to the endpoint via fetch
        
            .then(response => {
                return response.json();
            })
            .then(response => {
                console.log(response);
            })
            .catch(err=>{
                console.log(err);
            });
    
    </script>


    <script>

        console.log('\n');
        console.log('** Line 81, fetch() example **');
        console.log('\n');

/*
Here we are fetching a JSON file across the network and printing it to the console. 
The simplest use of fetch() takes one argument — the path to the resource you want to fetch — 
and returns a promise containing the response (a Response object).

This is just an HTTP response, not the actual JSON. 
To extract the JSON body content from the response, 
we use the json() method 
(defined on the Body mixin, which is implemented by both the Request and Response objects.)
*/

    fetch('https://randomuser.me/api/?results=5')
        .then(response => response.json())                      // Extract the json object
        .then(data => console.log('data->', data.results));     // data.results is the object
    

    fetch('https://randomuser.me/api/?results=5')
        .then(response => { return response.json() } )          // Extract the json object
        .then(data => console.log('data->', data.results));     // data.results is the object
    



    </script>


</html>